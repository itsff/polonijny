<link rel="import" href="bower_components/polymer/polymer.html">

<dom-module id="fancy-input">
    <template>
        <div class="panel panel-default">
            <div class="panel-heading">
                <div class="panel-title">[[panelTitle]]</div>
            </div>
            <div class="panel-body">
                <template is="dom-repeat" items="{{items}}" id="itemList">
                    <div class="form-group">
                        <div class="input-group">
                            <input type="text"
                                   value="{{item.value::input}}"
                                   class="form-control"
                                   placeholder="[[placeholder]]" />

                            <span class="input-group-btn">
                                <button type="button"
                                        class="btn btn-danger"
                                        aria-label="UsuÅ„"
                                        on-click="remove_item">
                                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                </button>
                            </span>
                        </div><!-- /input-group -->
                    </div>
                </template>

                <template is="dom-if" if="{{items.length}}">
                    <content></content>
                </template>

                <button type="button" class="btn btn-default" on-click="add_item">[[addText]]</button>
            </div>
        </div>
    </template>
</dom-module>

<script>
 Polymer({

     is: "fancy-input",

     ready: function() {
     },

     properties: {
         panelTitle: {
             type: String,
             value: "Item"
         },

         items: {
             type: Array,
             value: function() { return [{ value: ''}] },
             notify: true
         },

         placeholder: {
             type: String,
             value: 'type here...',
             notify: false
         },

         'addText': {
             type: String,
             value: 'Add another',
             notify: false
         }
     },

     remove_item: function(e) {
         var index = this.$.itemList.indexForElement(e.target);
         this.splice('items', index, 1);
     },

     add_item: function() {
         this.push('items', {value: ''});
     }
 });
</script>
